define(["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(e,t,a,n,i){function r(){return e.defer(function(t){return 0==c.length?(t.resolve(),void 0):(e.acquire(c).then(function(a){for(var n=0;n<a.length;n++){var i=a[n];if(i.install){var r=u[n];e.isObject(r)||(r={}),i.install(r),e.log("Plugin:Installed "+c[n])}else e.log("Plugin:Loaded "+c[n])}t.resolve()}).fail(function(t){e.error("Failed to load plugin(s). Details: "+t.message)}),void 0)}).promise()}var o,c=[],u=[];return o={title:"Application",configurePlugins:function(t,a){var n=e.keys(t);a=a||"plugins/",-1===a.indexOf("/",a.length-1)&&(a+="/");for(var i=0;i<n.length;i++){var r=n[i];c.push(a+r),u.push(t[r])}},start:function(){return e.log("Application:Starting"),this.title&&(document.title=this.title),e.defer(function(t){i(function(){r().then(function(){t.resolve(),e.log("Application:Started")})})}).promise()},setRoot:function(n,i,r){var o,c={activate:!0,transition:i};o=!r||e.isString(r)?document.getElementById(r||"applicationHost"):r,e.isString(n)?t.isViewUrl(n)?c.view=n:c.model=n:c.model=n,a.compose(o,c)}},n.includeIn(o),o});