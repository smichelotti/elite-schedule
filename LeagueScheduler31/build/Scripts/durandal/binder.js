define(["durandal/system","knockout"],function(e,t){function n(t){return void 0===t?{applyBindings:!0}:e.isBoolean(t)?{applyBindings:t}:(void 0===t.applyBindings&&(t.applyBindings=!0),t)}function a(a,l,s,d){if(!l||!s)return i.throwOnErrors?e.error(r):e.log(r,l,d),void 0;if(!l.getAttribute)return i.throwOnErrors?e.error(o):e.log(o,l,d),void 0;var v=l.getAttribute("data-view");try{var f;return a&&a.binding&&(f=a.binding(l)),f=n(f),i.binding(d,l,f),f.applyBindings?(e.log("Binding",v,d),t.applyBindings(s,l)):a&&t.utils.domData.set(l,c,{$data:a}),i.bindingComplete(d,l,f),a&&a.bindingComplete&&a.bindingComplete(l),t.utils.domData.set(l,u,f),f}catch(m){m.message=m.message+";\nView: "+v+";\nModuleId: "+e.getModuleId(d),i.throwOnErrors?e.error(m):e.log(m.message)}}var i,r="Insufficient Information to Bind",o="Unexpected View Type",u="durandal-binding-instruction",c="__ko_bindingContext__";return i={binding:e.noop,bindingComplete:e.noop,throwOnErrors:!1,getBindingInstruction:function(e){return t.utils.domData.get(e,u)},bindContext:function(e,t,n){return n&&e&&(e=e.createChildContext(n)),a(n,t,e,n||(e?e.$data:null))},bind:function(e,t){return a(e,t,e,e)}}});